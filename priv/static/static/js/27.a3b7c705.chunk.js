webpackJsonp([27],{1112:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(8),l=n.n(i),u=n(0),c=n.n(u),s=n(42),f=n(27),p=n(868),d=n(777),b=n(253),h=n.n(b),y=n(80),v=n.n(y),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=function(e){function t(){var e,n,o,i;a(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o._handleOnChange=function(e){var t=o.props,n=t.loadEntities,a=t.onChange,r=t.pages;n(t.authUser.token,{f:"page|"+e}),a({label:"page",value:h()(r,{id:Number.parseInt(e,10)})})},i=n,r(o,i)}return o(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadPages,n=e.value,a=e.authUser.token;t(),this.props.loadEntities(a,{f:"page|"+n.id})}},{key:"componentDidUpdate",value:function(e){var t=e.value,n=this.props,a=n.value,r=n.authUser.token,o=n.loadEntities;v()(t,a)||o(r,{f:"page|"+a.id})}},{key:"render",value:function(){var e=this.props,t=e.pages,n=e.value,a=e.small;return c.a.createElement(d.d,{small:a,defaultValue:n.id,onChange:this._handleOnChange,items:t})}}]),t}(c.a.Component);g.propTypes={pages:l.a.array.isRequired,onChange:l.a.func.isRequired,value:l.a.object.isRequired,authUser:l.a.object.isRequired,loadPages:l.a.func.isRequired,loadEntities:l.a.func.isRequired,small:l.a.bool};var O=function(e){var t=e.pages;return{authUser:e.authUser,pages:t}},_=function(e){return Object(s.b)({loadPages:p.f,loadEntities:p.e},e)};t.a=Object(f.b)(O,_)(g)},1113:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(8),l=n.n(i),u=n(0),c=n.n(u),s=n(42),f=n(27),p=n(868),d=n(777),b=n(253),h=n.n(b),y=n(80),v=n.n(y),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._handleOnChange=n._handleOnChange.bind(n),n}return o(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadActions,n=e.value;t(e.authUser.token,{f:"e|"+n.id})}},{key:"componentDidUpdate",value:function(e){var t=e.value,n=this.props,a=n.loadActions,r=n.authUser.token,o=this.props.value;v()(t,o)||a(r,{f:"e|"+o.id})}},{key:"_handleOnChange",value:function(e){var t=this.props,n=t.loadActions,a=t.onChange,r=t.entities;n(t.authUser.token,{f:"e|"+e}),a({label:"entity",value:h()(r,{id:Number.parseInt(e,10)})})}},{key:"render",value:function(){var e=this.props,t=e.entities,n=e.value,a=e.small,r=e.disabled,o=h()(t,{id:n.id})||{};return console.log("policy -> entity",n,t,o),c.a.createElement(d.d,{disabled:r||t.length<1,small:a,defaultValue:o.id,onChange:this._handleOnChange,items:t})}}]),t}(c.a.Component);g.propTypes={entities:l.a.array.isRequired,onChange:l.a.func.isRequired,value:l.a.object.isRequired,loadActions:l.a.func.isRequired,loadEntities:l.a.func.isRequired,small:l.a.bool,disabled:l.a.bool};var O=function(e){return{entities:e.entities,authUser:e.authUser}},_=function(e){return Object(s.b)({loadEntities:p.e,loadActions:p.d},e)};t.a=Object(f.b)(O,_)(g)},1114:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(8),l=n.n(i),u=n(0),c=n.n(u),s=n(27),f=n(777),p=n(253),d=n.n(p),b=n(842),h=n.n(b),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),v=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._handleOnChange=n._handleOnChange.bind(n),n}return o(t,e),y(t,[{key:"_handleOnChange",value:function(e){(0,this.props.onChange)({label:"actions",value:e})}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.values,a=e.small,r=e.disabled,o=t.map(function(e){return{id:e.id,name:e.name}}),i=h()(n,function(e){var n=e.name,a=e.id;return d()(t,{name:n,id:a})});return c.a.createElement(f.c,{disabled:r||t.length<1,label:"action",small:a,defaultValues:i,onChange:this._handleOnChange,items:o})}}]),t}(c.a.Component);v.propTypes={actions:l.a.array.isRequired,onChange:l.a.func.isRequired,values:l.a.array.isRequired,small:l.a.bool,disabled:l.a.bool};var m=function(e){return{actions:e.actions}};t.a=Object(s.b)(m)(v)},1572:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u=n.n(l),c=n(58),s=n(41),f=n(8),p=n.n(f),d=n(27),b=n(42),h=n(1006),y=n(1112),v=n(1113),m=n(728),g=n(1114),O=n(253),_=n.n(O),E=n(80),C=n.n(E),P=n(730),j=n(6),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),R=function(e){function t(){var e,n,i,l;r(this,t);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),i.state={policy:{page:{},entity:{},actions:[]},policyBuffer:{page:{},entity:{},actions:[]}},i._handleInputChange=function(e,t){i.setState(function(){return{policy:Object.assign({},i.state.policy,a({},e,t))}})},i._isFormValid=function(){var e=i.state.policy,t=e.name,n=e.gate.id,a=e.entity.id,r=e.actions;return Object(P.a)({name:t,gateId:n,entityId:a,actions:r})},i._handleEditPolicy=function(){var e=i.state.policy,t=e.name,n=e.entity.id,a=e.actions,r=e.uuid,o=a.map(function(e){return e.id}),l=new FormData;l.append("name",t),l.append("entity_id",n);for(var u=0;u<o.length;u++)l.append("actions[]",o[u]);i.props.editPolicy(r,l)},l=n,o(i,l)}return i(t,e),w(t,[{key:"componentDidUpdate",value:function(e){var t=e.OPERATION_SUCCESSFUL,n=e.OPERATION_FAILED,a=this.props,r=a.OPERATION_SUCCESSFUL,o=a.OPERATION_FAILED,i=a.history;C()(t,r)||r.action===j._25&&(i.goBack(),m.a.show({message:"Policy Updated Successfully \ud83d\ude03",intent:c.x.SUCCESS,icon:"tick"})),C()(n,o)||o.action===j._25&&(console.log(o.data),m.a.show({message:"Could Not Update Policy \ud83d\ude1e",intent:c.x.DANGER,icon:"error"}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.policy,a=t.policyBuffer,r=this.props.editingPolicy,o=!this._isFormValid()||C()(n,a);return[u.a.createElement("div",{className:"bp3-dialog-body"},u.a.createElement("label",{className:"bp3-label"},"Name",u.a.createElement("input",{onChange:function(t){var n=t.target,a=n.name,r=n.value;return e._handleInputChange(a,r)},value:n.name||"",name:"name",className:"bp3-input bp3-fill",type:"text",dir:"auto"})),u.a.createElement("label",{className:"bp3-label"},"Page",u.a.createElement(y.a,{value:n.gate||"",small:!1,onChange:function(t){var n=t.value;return e._handleInputChange("gate",n)}})),u.a.createElement("label",{className:"bp3-label"},"Entity",u.a.createElement(v.a,{value:n.entity||"",small:!1,onChange:function(t){var n=t.value;return e._handleInputChange("entity",n)}})),u.a.createElement("label",{className:"bp3-label"},"Actions",u.a.createElement(g.a,{onChange:function(t){var n=t.value;return e._handleInputChange("actions",n)},values:n.actions})),u.a.createElement("label",{className:"bp3-label"},"Description",u.a.createElement("textarea",{name:"description",value:n.description||"",onChange:function(t){var n=t.target,a=n.name,r=n.value;return e._handleInputChange(a,r)},className:"bp3-input bp3-fill",dir:"auto"}))),u.a.createElement("div",{className:"bp3-dialog-footer"},u.a.createElement("div",{className:"bp3-dialog-footer-actions"},u.a.createElement(c.e,{disabled:o,loading:r,onClick:function(){return e._handleEditPolicy()},intent:c.x.PRIMARY,icon:"tick",text:"save"})))]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.policy,a=e.match.params.uuid,r=e.policies,o=_()(r,{uuid:a})||{gate:{},entity:{},actions:[]};return C()(n,o)?null:{policy:o,policyBuffer:Object.assign({},o)}}}]),t}(u.a.Component);R.propTypes={match:p.a.object.isRequired,authUser:p.a.object.isRequired,OPERATION_SUCCESSFUL:p.a.object.isRequired,OPERATION_FAILED:p.a.object.isRequired,policies:p.a.array.isRequired,editPolicy:p.a.func.isRequired,editingPolicy:p.a.bool.isRequired};var U=function(e){return{authUser:e.authUser,OPERATION_FAILED:e.OPERATION_FAILED,OPERATION_SUCCESSFUL:e.OPERATION_SUCCESSFUL,editingPolicy:e.editingPolicy,policies:e.policies}},A=function(e){return Object(b.b)({editPolicy:h.c},e)};t.default=Object(s.f)(Object(d.b)(U,A)(R))},730:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=[];return l()(e,function(e,n){if("number"===typeof e)if(e){var o;t=[].concat(r(t),[(o={},a(o,n,e),a(o,"valid",!0),o)])}else{var i;t=[].concat(r(t),[(i={},a(i,n,e),a(i,"valid",!1),i)])}else if("string"===typeof e)if(e.trim().length>0){var l;t=[].concat(r(t),[(l={},a(l,n,e),a(l,"valid",!0),l)])}else{var u;t=[].concat(r(t),[(u={},a(u,n,e),a(u,"valid",!1),u)])}else if(c()(e))if(e.length>0){var s;t=[].concat(r(t),[(s={},a(s,n,e),a(s,"valid",!0),s)])}else{var f;t=[].concat(r(t),[(f={},a(f,n,e),a(f,"valid",!1),f)])}else{var p;t=[].concat(r(t),[(p={},a(p,n,e),a(p,"valid",!1),p)])}}),console.log("form validation",t),f()(t,"valid")}t.a=o;var i=n(732),l=n.n(i),u=n(14),c=n.n(u),s=n(734),f=n.n(s)},732:function(e,t,n){function a(e,t){return e&&r(e,o(t))}var r=n(256),o=n(733);e.exports=a},733:function(e,t,n){function a(e){return"function"==typeof e?e:r}var r=n(60);e.exports=a},734:function(e,t,n){function a(e,t,n){var a=l(e)?r:o;return n&&u(e,t,n)&&(t=void 0),a(e,i(t,3))}var r=n(735),o=n(736),i=n(59),l=n(14),u=n(257);e.exports=a},735:function(e,t){function n(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}e.exports=n},736:function(e,t,n){function a(e,t){var n=!0;return r(e,function(e,a,r){return n=!!t(e,a,r)}),n}var r=n(136);e.exports=a}});
//# sourceMappingURL=27.a3b7c705.chunk.js.map