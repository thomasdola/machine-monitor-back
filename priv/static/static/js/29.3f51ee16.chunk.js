webpackJsonp([29],{1731:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),l=n.n(c),s=n(41),u=n(42),f=n(8),d=n.n(f),p=n(27),v=n(43),m=n(1136),h=n(80),b=n.n(h),y=n(828),g=n(254),E=n.n(g),S=n(827),O=n(729),C=n(6),R=n(136),_=n(263),U=n(262),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=function(e){function t(){var e,n,o,c;a(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.state={service:{},serviceBuffer:{},serviceRaw:{},confirmDelete:!1},o._handleInputChange=function(e,t){o.setState(function(){return{service:Object.assign({},o.state.service,r({},e,t))}})},o._handleDelete=function(){o.props.deleteService(o.props.authUser.token,o.state.service.id),o.setState({confirmDelete:!1})},o._handleEdit=function(){var e=o.props,t=e.authUser.token,n=e.editService,r=o.state,a=r.service,i=a.name,c=a.display,l=a.path,s=r.serviceRaw.id,u=new FormData;u.append("name",i),u.append("display",c),u.append("path",l),n(t,s,u)},o._isFormValid=function(){var e=o.state.service,t=e.name,n=e.display,r=e.path,a={name:t,display:n,path:r};return Object(O.a)(a)},c=n,i(o,c)}return o(t,e),N(t,[{key:"componentDidUpdate",value:function(e){var t=e.OPERATION_SUCCESSFUL,n=e.OPERATION_FAILED,r=this.props,a=r.OPERATION_SUCCESSFUL,i=r.OPERATION_FAILED,o=r.history,c=r.authUser.token,l=r.loadServices;if(!b()(t,a)){l(c,{});var u=this.state.service.name.toUpperCase();a.action===C._19&&(o.goBack(),R.a.show({message:u+" Successfully Updated \ud83d\ude03",intent:s.x.SUCCESS,icon:"tick"})),a.action===C.U&&(o.goBack(),R.a.show({message:u+" Successfully Deleted \ud83d\ude03",intent:s.x.SUCCESS,icon:"tick"}))}if(!b()(n,i)){var f=this.state.service.name.toUpperCase();i.action===C._19&&(console.log(i.data),R.a.show({message:"Could Not Update "+f+" \ud83d\ude1e",intent:s.x.DANGER,icon:"error"})),i.action===C.U&&(console.log(i.data),R.a.show({message:"Could Not Delete "+f+" \ud83d\ude1e",intent:s.x.DANGER,icon:"error"}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.editingService,a=t.deletingService,i=t.authUser,o=this.state,c=o.service,u=c.name,f=c.display,d=c.path,p=o.serviceBuffer,v=o.service,m=(o.confirmDelete,o.serviceRaw),h=!this._isFormValid()||b()(v,p),g=!m.id,E=!!i.root||_.a.User(i).perform(y.c,S.h,U.h),O=!!i.root||_.a.User(i).perform(y.b,S.h,U.h);return[l.a.createElement("div",{className:"bp3-dialog-body"},l.a.createElement("label",{className:"bp3-label"},"Name",l.a.createElement("input",{value:u||"",name:"name",onChange:function(t){var n=t.target,r=n.name,a=n.value;return e._handleInputChange(r,a)},className:"bp3-input bp3-fill",type:"text",dir:"auto"})),l.a.createElement("label",{className:"bp3-label"},"Display Name",l.a.createElement("input",{value:f||"",name:"display",onChange:function(t){var n=t.target,r=n.name,a=n.value;return e._handleInputChange(r,a)},className:"bp3-input bp3-fill",type:"text",dir:"auto"})),l.a.createElement("label",{className:"bp3-label"},"Full Path",l.a.createElement("input",{value:d||"",name:"path",onChange:function(t){var n=t.target,r=n.name,a=n.value;return e._handleInputChange(r,a)},className:"bp3-input bp3-fill",type:"text",dir:"auto"}))),l.a.createElement("div",{className:"bp3-dialog-footer"},l.a.createElement("div",{className:"bp3-dialog-footer-actions"},g&&l.a.createElement(s.e,{intent:s.x.PRIMARY,onClick:function(){return n.goBack()},icon:"undo",text:"Go Back"}),l.a.createElement(s.H,{isOpen:this.state.confirmDelete,interactionKind:s.I.CLICK,position:s.J.BOTTOM},l.a.createElement(s.e,{disabled:a||r||g||!O,loading:a,onClick:function(){return e.setState({confirmDelete:!0})},intent:s.x.DANGER,text:"delete",icon:"trash"}),l.a.createElement("div",{style:{padding:".5rem",display:"flex",flexDirection:"column"}},l.a.createElement("header",null,"Are you sure?"),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",marginTop:".5rem"}},l.a.createElement(s.e,{onClick:this._handleDelete,small:!0,text:"yes",intent:s.x.SUCCESS}),l.a.createElement(s.e,{onClick:function(){return e.setState({confirmDelete:!1})},small:!0,text:"no",intent:s.x.DANGER})))),l.a.createElement(s.e,{disabled:h||a||g||!E,loading:r,intent:s.x.PRIMARY,onClick:this._handleEdit,icon:"tick",text:"save"})))]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.serviceRaw,r=e.services,a=e.match.params.id,i=E()(r,{id:Number.parseInt(a,10)})||{},o=Object.assign({},i);return b()(n,i)?null:{service:o,serviceBuffer:Object.assign({},o),serviceRaw:i}}}]),t}(l.a.Component);x.propTypes={history:d.a.object.isRequired,authUser:d.a.object.isRequired,match:d.a.object.isRequired,OPERATION_FAILED:d.a.object.isRequired,OPERATION_SUCCESSFUL:d.a.object.isRequired,editService:d.a.func.isRequired,deleteService:d.a.func.isRequired,editingService:d.a.bool.isRequired,deletingService:d.a.bool.isRequired,services:d.a.array.isRequired,loadServices:d.a.func.isRequired};var A=function(e){return{authUser:e.authUser,OPERATION_FAILED:e.OPERATION_FAILED,OPERATION_SUCCESSFUL:e.OPERATION_SUCCESSFUL,editingService:e.editingService,deletingService:e.deletingService,services:e.services}},D=function(e){return Object(v.b)({deleteService:m.b,editService:m.c,loadServices:m.d},e)};t.default=Object(u.f)(Object(p.b)(A,D)(x))},729:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t=[];return c()(e,function(e,n){if("number"===typeof e)if(e){var i;t=[].concat(a(t),[(i={},r(i,n,e),r(i,"valid",!0),i)])}else{var o;t=[].concat(a(t),[(o={},r(o,n,e),r(o,"valid",!1),o)])}else if("string"===typeof e)if(e.trim().length>0){var c;t=[].concat(a(t),[(c={},r(c,n,e),r(c,"valid",!0),c)])}else{var l;t=[].concat(a(t),[(l={},r(l,n,e),r(l,"valid",!1),l)])}else if(s()(e))if(e.length>0){var u;t=[].concat(a(t),[(u={},r(u,n,e),r(u,"valid",!0),u)])}else{var f;t=[].concat(a(t),[(f={},r(f,n,e),r(f,"valid",!1),f)])}else{var d;t=[].concat(a(t),[(d={},r(d,n,e),r(d,"valid",!1),d)])}}),console.log("form validation",t),f()(t,"valid")}t.a=i;var o=n(731),c=n.n(o),l=n(14),s=n.n(l),u=n(733),f=n.n(u)},731:function(e,t,n){function r(e,t){return e&&a(e,i(t))}var a=n(257),i=n(732);e.exports=r},732:function(e,t,n){function r(e){return"function"==typeof e?e:a}var a=n(60);e.exports=r},733:function(e,t,n){function r(e,t,n){var r=c(e)?a:i;return n&&l(e,t,n)&&(t=void 0),r(e,o(t,3))}var a=n(734),i=n(735),o=n(59),c=n(14),l=n(258);e.exports=r},734:function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}e.exports=n},735:function(e,t,n){function r(e,t){var n=!0;return a(e,function(e,r,a){return n=!!t(e,r,a)}),n}var a=n(137);e.exports=r},827:function(e,t,n){"use strict";n.d(t,"i",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return f});var r="user",a="log",i="role",o="policy",c="center",l="application",s="service",u="network",f="printer"},828:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o});var r="add",a="delete",i="edit",o="export"}});
//# sourceMappingURL=29.3f51ee16.chunk.js.map