webpackJsonp([30],{1721:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),l=n.n(c),p=n(58),u=n(41),s=n(8),f=n.n(s),d=n(27),m=n(42),v=n(1127),b=n(80),h=n.n(b),g=n(826),y=n(253),E=n.n(y),A=n(825),O=n(727),C=n(6),R=n(725),S=n(262),_=n(261),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),x=function(e){function t(){var e,n,o,c;i(this,t);for(var l=arguments.length,p=Array(l),u=0;u<l;u++)p[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),o.state={application:{},applicationBuffer:{},applicationRaw:{},confirmDelete:!1},o._handleInputChange=function(e,t){o.setState(function(){return{application:Object.assign({},o.state.application,a({},e,t))}})},o._handleDeleteApplication=function(){var e=o.props,t=e.authUser.token;(0,e.deleteApplication)(t,o.state.application.id),o.setState({confirmDelete:!1})},o._handleEditApplication=function(){var e=o.props,t=e.authUser.token,n=e.editApplication,a=o.state,i=a.application,r=i.name,c=i.display,l=i.path,p=a.applicationRaw.id,u=new FormData;u.append("name",r),u.append("display",c),u.append("path",l),n(t,p,u)},o._isFormValid=function(){var e=o.state.application,t=e.name,n=e.display,a=e.path,i={name:t,display:n,path:a};return Object(O.a)(i)},c=n,r(o,c)}return o(t,e),N(t,[{key:"componentDidUpdate",value:function(e){var t=e.OPERATION_SUCCESSFUL,n=e.OPERATION_FAILED,a=this.props,i=a.OPERATION_SUCCESSFUL,r=a.OPERATION_FAILED,o=a.history,c=a.loadApplications,l=a.authUser.token;if(!h()(t,i)){var u=this.state.application.name.toUpperCase();c(l,{}),i.action===C._16&&(o.goBack(),R.a.show({message:u+" Successfully Updated \ud83d\ude03",intent:p.x.SUCCESS,icon:"tick"})),i.action===C.R&&(o.goBack(),R.a.show({message:u+" Successfully Deleted \ud83d\ude03",intent:p.x.SUCCESS,icon:"tick"}))}if(!h()(n,r)){var s=this.state.application.name.toUpperCase();r.action===C._16&&(console.log(r.data),R.a.show({message:"Could Not Update "+s+" \ud83d\ude1e",intent:p.x.DANGER,icon:"error"})),r.action===C.R&&(console.log(r.data),R.a.show({message:"Could Not Delete "+s+" \ud83d\ude1e",intent:p.x.DANGER,icon:"error"}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.editingApplication,i=t.deletingApplication,r=t.authUser,o=this.state,c=o.application,u=c.name,s=c.display,f=c.path,d=o.applicationBuffer,m=o.application,v=(o.confirmDelete,o.applicationRaw),b=!this._isFormValid()||h()(m,d),y=!v.id,E=!!r.root||S.a.User(r).perform(g.c,A.a,_.g),O=!!r.root||S.a.User(r).perform(g.b,A.a,_.g);return[l.a.createElement("div",{className:"bp3-dialog-body"},l.a.createElement("label",{className:"bp3-label"},"Name",l.a.createElement("input",{value:u||"",name:"name",onChange:function(t){var n=t.target,a=n.name,i=n.value;return e._handleInputChange(a,i)},className:"bp3-input bp3-fill",type:"text",dir:"auto"})),l.a.createElement("label",{className:"bp3-label"},"Display Name",l.a.createElement("input",{value:s||"",name:"display",onChange:function(t){var n=t.target,a=n.name,i=n.value;return e._handleInputChange(a,i)},className:"bp3-input bp3-fill",type:"text",dir:"auto"})),l.a.createElement("label",{className:"bp3-label"},"Full Path",l.a.createElement("input",{value:f||"",name:"path",onChange:function(t){var n=t.target,a=n.name,i=n.value;return e._handleInputChange(a,i)},className:"bp3-input bp3-fill",type:"text",dir:"auto"}))),l.a.createElement("div",{className:"bp3-dialog-footer"},l.a.createElement("div",{className:"bp3-dialog-footer-actions"},y&&l.a.createElement(p.e,{intent:p.x.PRIMARY,onClick:function(){return n.goBack()},icon:"undo",text:"Go Back"}),l.a.createElement(p.H,{isOpen:this.state.confirmDelete,interactionKind:p.I.CLICK,position:p.J.BOTTOM},l.a.createElement(p.e,{disabled:i||a||y||!O,loading:i,onClick:function(){return e.setState({confirmDelete:!0})},intent:p.x.DANGER,text:"delete",icon:"trash"}),l.a.createElement("div",{style:{padding:".5rem",display:"flex",flexDirection:"column"}},l.a.createElement("header",null,"Are you sure?"),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",marginTop:".5rem"}},l.a.createElement(p.e,{onClick:this._handleDeleteApplication,small:!0,text:"yes",intent:p.x.SUCCESS}),l.a.createElement(p.e,{onClick:function(){return e.setState({confirmDelete:!1})},small:!0,text:"no",intent:p.x.DANGER})))),l.a.createElement(p.e,{disabled:b||i||y||!E,loading:a,intent:p.x.PRIMARY,onClick:this._handleEditApplication,icon:"tick",text:"save"})))]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.applicationRaw,a=e.applications,i=e.match.params.id,r=E()(a,{id:Number.parseInt(i)})||{},o=Object.assign({},r);return h()(n,r)?null:{application:o,applicationBuffer:Object.assign({},o),applicationRaw:r}}}]),t}(l.a.Component);x.propTypes={history:f.a.object.isRequired,authUser:f.a.object.isRequired,match:f.a.object.isRequired,OPERATION_FAILED:f.a.object.isRequired,OPERATION_SUCCESSFUL:f.a.object.isRequired,editApplication:f.a.func.isRequired,deleteApplication:f.a.func.isRequired,loadApplications:f.a.func.isRequired,editingApplication:f.a.bool.isRequired,deletingApplication:f.a.bool.isRequired,applications:f.a.array.isRequired};var U=function(e){return{authUser:e.authUser,OPERATION_FAILED:e.OPERATION_FAILED,OPERATION_SUCCESSFUL:e.OPERATION_SUCCESSFUL,editingApplication:e.editingApplication,deletingApplication:e.deletingApplication,applications:e.applications}},D=function(e){return Object(m.b)({deleteApplication:v.b,editApplication:v.c,loadApplications:v.d},e)};t.default=Object(u.f)(Object(d.b)(U,D)(x))},725:function(e,t,n){"use strict";var a=n(58);t.a=a.T.create({position:a.J.TOP})},727:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){var t=[];return c()(e,function(e,n){if("number"===typeof e)if(e){var r;t=[].concat(i(t),[(r={},a(r,n,e),a(r,"valid",!0),r)])}else{var o;t=[].concat(i(t),[(o={},a(o,n,e),a(o,"valid",!1),o)])}else if("string"===typeof e)if(e.trim().length>0){var c;t=[].concat(i(t),[(c={},a(c,n,e),a(c,"valid",!0),c)])}else{var l;t=[].concat(i(t),[(l={},a(l,n,e),a(l,"valid",!1),l)])}else if(p()(e))if(e.length>0){var u;t=[].concat(i(t),[(u={},a(u,n,e),a(u,"valid",!0),u)])}else{var s;t=[].concat(i(t),[(s={},a(s,n,e),a(s,"valid",!1),s)])}else{var f;t=[].concat(i(t),[(f={},a(f,n,e),a(f,"valid",!1),f)])}}),console.log("form validation",t),s()(t,"valid")}t.a=r;var o=n(729),c=n.n(o),l=n(14),p=n.n(l),u=n(731),s=n.n(u)},729:function(e,t,n){function a(e,t){return e&&i(e,r(t))}var i=n(256),r=n(730);e.exports=a},730:function(e,t,n){function a(e){return"function"==typeof e?e:i}var i=n(60);e.exports=a},731:function(e,t,n){function a(e,t,n){var a=c(e)?i:r;return n&&l(e,t,n)&&(t=void 0),a(e,o(t,3))}var i=n(732),r=n(733),o=n(59),c=n(14),l=n(257);e.exports=a},732:function(e,t){function n(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}e.exports=n},733:function(e,t,n){function a(e,t){var n=!0;return i(e,function(e,a,i){return n=!!t(e,a,i)}),n}var i=n(136);e.exports=a},825:function(e,t,n){"use strict";n.d(t,"i",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"g",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"h",function(){return p}),n.d(t,"d",function(){return u}),n.d(t,"f",function(){return s});var a="user",i="log",r="role",o="policy",c="center",l="application",p="service",u="network",s="printer"},826:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o});var a="add",i="delete",r="edit",o="export"}});
//# sourceMappingURL=30.dcc27f7e.chunk.js.map