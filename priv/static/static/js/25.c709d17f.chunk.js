webpackJsonp([25],{1109:function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t(8),l=t.n(i),u=t(0),c=t.n(u),s=t(42),f=t(27),p=t(865),d=t(774),b=t(253),h=t.n(b),v=t(80),y=t.n(v),m=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),g=function(e){function n(){var e,t,o,i;a(this,n);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return t=o=r(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),o._handleOnChange=function(e){var n=o.props,t=n.loadEntities,a=n.onChange,r=n.pages;t(n.authUser.token,{f:"page|"+e}),a({label:"page",value:h()(r,{id:Number.parseInt(e,10)})})},i=t,r(o,i)}return o(n,e),m(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.loadPages,t=e.value;n(),this.props.loadEntities({f:"page|"+t.id})}},{key:"componentDidUpdate",value:function(e){var n=e.value,t=this.props,a=t.value,r=t.authUser.token,o=t.loadEntities;y()(n,a)||o(r,{f:"page|"+a.id})}},{key:"render",value:function(){var e=this.props,n=e.pages,t=e.value,a=e.small;return c.a.createElement(d.d,{small:a,defaultValue:t.id,onChange:this._handleOnChange,items:n})}}]),n}(c.a.Component);g.propTypes={pages:l.a.array.isRequired,onChange:l.a.func.isRequired,value:l.a.object.isRequired,authUser:l.a.object.isRequired,loadPages:l.a.func.isRequired,loadEntities:l.a.func.isRequired,small:l.a.bool};var O=function(e){return{pages:e.pages}},_=function(e){return Object(s.b)({loadPages:p.f,loadEntities:p.e},e)};n.a=Object(f.b)(O,_)(g)},1110:function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t(8),l=t.n(i),u=t(0),c=t.n(u),s=t(42),f=t(27),p=t(865),d=t(774),b=t(253),h=t.n(b),v=t(80),y=t.n(v),m=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),g=function(e){function n(e){a(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._handleOnChange=t._handleOnChange.bind(t),t}return o(n,e),m(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.loadActions)({f:"e|"+e.value.id})}},{key:"componentDidUpdate",value:function(e){var n=e.value,t=this.props.value;y()(n,t)||this.props.loadActions({f:"e|"+t.id})}},{key:"_handleOnChange",value:function(e){var n=this.props,t=n.loadActions,a=n.onChange,r=n.entities;t({f:"e|"+e}),a({label:"entity",value:h()(r,{id:Number.parseInt(e,10)})})}},{key:"render",value:function(){var e=this.props,n=e.entities,t=e.value,a=e.small,r=e.disabled,o=h()(n,{id:t.id})||{};return console.log("policy -> entity",t,n,o),c.a.createElement(d.d,{disabled:r||n.length<1,small:a,defaultValue:o.id,onChange:this._handleOnChange,items:n})}}]),n}(c.a.Component);g.propTypes={entities:l.a.array.isRequired,onChange:l.a.func.isRequired,value:l.a.object.isRequired,loadActions:l.a.func.isRequired,loadEntities:l.a.func.isRequired,small:l.a.bool,disabled:l.a.bool};var O=function(e){return{entities:e.entities}},_=function(e){return Object(s.b)({loadEntities:p.e,loadActions:p.d},e)};n.a=Object(f.b)(O,_)(g)},1111:function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t(8),l=t.n(i),u=t(0),c=t.n(u),s=t(27),f=t(774),p=t(253),d=t.n(p),b=t(839),h=t.n(b),v=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),y=function(e){function n(e){a(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._handleOnChange=t._handleOnChange.bind(t),t}return o(n,e),v(n,[{key:"_handleOnChange",value:function(e){(0,this.props.onChange)({label:"actions",value:e})}},{key:"render",value:function(){var e=this.props,n=e.actions,t=e.values,a=e.small,r=e.disabled,o=n.map(function(e){return{id:e.id,name:e.name}}),i=h()(t,function(e){var t=e.name,a=e.id;return d()(n,{name:t,id:a})});return c.a.createElement(f.c,{disabled:r||n.length<1,label:"action",small:a,defaultValues:i,onChange:this._handleOnChange,items:o})}}]),n}(c.a.Component);y.propTypes={actions:l.a.array.isRequired,onChange:l.a.func.isRequired,values:l.a.array.isRequired,small:l.a.bool,disabled:l.a.bool};var m=function(e){return{actions:e.actions}};n.a=Object(s.b)(m)(y)},1568:function(e,n,t){"use strict";function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var l=t(0),u=t.n(l),c=t(58),s=t(1109),f=t(1110),p=t(1111),d=t(8),b=t.n(d),h=t(27),v=t(42),y=t(1003),m=t(727),g=t(6),O=t(725),_=t(80),E=t.n(_),C=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),P=function(e){function n(){var e,t,i,l;r(this,n);for(var u=arguments.length,c=Array(u),s=0;s<u;s++)c[s]=arguments[s];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(c))),i.state={page:{},entity:{},actions:[],name:"",description:""},i._handleInputChange=function(e,n){i.setState(function(){return a({},e,n)})},i._handleAddPolicy=function(){var e=i.state,n=e.name,t=e.entity.id,a=e.actions,r=a.map(function(e){return e.id}),o=i.props.authUser.token,l=new FormData;l.append("name",n),l.append("entity_id",t);for(var u=0;u<r.length;u++)l.append("actions[]",r[u]);i.props.addPolicy(o,l)},i._isFormValid=function(){var e=i.state,n=e.name,t=e.page.id,a=e.entity.id,r=e.actions;return Object(m.a)({name:n,pageId:t,entityId:a,actions:r})},l=t,o(i,l)}return i(n,e),C(n,[{key:"componentDidUpdate",value:function(e){var n=e.OPERATION_SUCCESSFUL,t=e.OPERATION_FAILED,a=this.props,r=a.OPERATION_SUCCESSFUL,o=a.OPERATION_FAILED,i=a.history,l=this.state.name.toUpperCase();E()(n,r)||r.action===g.s&&(i.goBack(),O.a.show({message:l+" Successfully Added \ud83d\ude03",intent:c.x.SUCCESS,icon:"tick"})),E()(t,o)||o.action===g.s&&(console.log(o.data),O.a.show({message:"Could Not Add "+l+" \ud83d\ude1e",intent:c.x.DANGER,icon:"error"}))}},{key:"render",value:function(){var e=this,n=this.state,t=n.page,a=n.actions,r=n.description,o=n.entity,i=n.name,l=this.props.addingPolicy,d=!this._isFormValid();return[u.a.createElement("div",{className:"bp3-dialog-body"},u.a.createElement("label",{className:"bp3-label"},"Name",u.a.createElement("input",{onChange:function(n){var t=n.target,a=t.name,r=t.value;return e._handleInputChange(a,r)},value:i||"",name:"name",className:"bp3-input bp3-fill",type:"text",dir:"auto"})),u.a.createElement("label",{className:"bp3-label"},"Page",u.a.createElement(s.a,{value:t||"",small:!1,onChange:function(n){var t=n.value;return e._handleInputChange("gate",t)}})),u.a.createElement("label",{className:"bp3-label"},"Entity",u.a.createElement(f.a,{value:o||"",small:!1,onChange:function(n){var t=n.value;return e._handleInputChange("entity",t)}})),u.a.createElement("label",{className:"bp3-label"},"Actions",u.a.createElement(p.a,{onChange:function(n){var t=n.value;return e._handleInputChange("actions",t)},values:a})),u.a.createElement("label",{className:"bp3-label"},"Description",u.a.createElement("textarea",{name:"description",value:r||"",onChange:function(n){var t=n.target,a=t.name,r=t.value;return e._handleInputChange(a,r)},className:"bp3-input bp3-fill",dir:"auto"}))),u.a.createElement("div",{className:"bp3-dialog-footer"},u.a.createElement("div",{className:"bp3-dialog-footer-actions"},u.a.createElement(c.e,{disabled:d,loading:l,intent:c.x.PRIMARY,onClick:this._handleAddPolicy,icon:"tick",text:"save"})))]}}]),n}(u.a.Component);P.propTypes={history:b.a.object.isRequired,authUser:b.a.object.isRequired,OPERATION_FAILED:b.a.object.isRequired,OPERATION_SUCCESSFUL:b.a.object.isRequired,addPolicy:b.a.func.isRequired,addingPolicy:b.a.bool.isRequired};var j=function(e){return{authUser:e.authUser,OPERATION_FAILED:e.OPERATION_FAILED,OPERATION_SUCCESSFUL:e.OPERATION_SUCCESSFUL,addingPolicy:e.addingPolicy}},w=function(e){return Object(v.b)({addPolicy:y.a},e)};n.default=Object(h.b)(j,w)(P)},727:function(e,n,t){"use strict";function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e){var n=[];return l()(e,function(e,t){if("number"===typeof e)if(e){var o;n=[].concat(r(n),[(o={},a(o,t,e),a(o,"valid",!0),o)])}else{var i;n=[].concat(r(n),[(i={},a(i,t,e),a(i,"valid",!1),i)])}else if("string"===typeof e)if(e.trim().length>0){var l;n=[].concat(r(n),[(l={},a(l,t,e),a(l,"valid",!0),l)])}else{var u;n=[].concat(r(n),[(u={},a(u,t,e),a(u,"valid",!1),u)])}else if(c()(e))if(e.length>0){var s;n=[].concat(r(n),[(s={},a(s,t,e),a(s,"valid",!0),s)])}else{var f;n=[].concat(r(n),[(f={},a(f,t,e),a(f,"valid",!1),f)])}else{var p;n=[].concat(r(n),[(p={},a(p,t,e),a(p,"valid",!1),p)])}}),console.log("form validation",n),f()(n,"valid")}n.a=o;var i=t(729),l=t.n(i),u=t(14),c=t.n(u),s=t(731),f=t.n(s)},729:function(e,n,t){function a(e,n){return e&&r(e,o(n))}var r=t(256),o=t(730);e.exports=a},730:function(e,n,t){function a(e){return"function"==typeof e?e:r}var r=t(60);e.exports=a},731:function(e,n,t){function a(e,n,t){var a=l(e)?r:o;return t&&u(e,n,t)&&(n=void 0),a(e,i(n,3))}var r=t(732),o=t(733),i=t(59),l=t(14),u=t(257);e.exports=a},732:function(e,n){function t(e,n){for(var t=-1,a=null==e?0:e.length;++t<a;)if(!n(e[t],t,e))return!1;return!0}e.exports=t},733:function(e,n,t){function a(e,n){var t=!0;return r(e,function(e,a,r){return t=!!n(e,a,r)}),t}var r=t(136);e.exports=a}});
//# sourceMappingURL=25.c709d17f.chunk.js.map