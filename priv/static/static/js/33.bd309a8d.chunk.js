webpackJsonp([33],{1117:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),o=n(41),i=function(e){var t=e.open,n=e.onCancel,r=e.onConfirm,i=e.intent,l=e.message;return l=l||"Are You Sure ?",a.a.createElement(o.b,{cancelButtonText:"No",confirmButtonText:"Yes",intent:i||o.x.SUCCESS,isOpen:t,onCancel:n,onConfirm:r},a.a.createElement("p",null,l))}},1118:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(8),l=n.n(i),s=n(0),u=n.n(s),c=n(774),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){var e,n,o,i;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o._handleOnChange=function(e){(0,o.props.onChange)({label:"role",value:e})},i=n,a(o,i)}return o(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.roles,n=e.value,r=e.small,a=e.disabled;return u.a.createElement(c.d,{label:"role",disabled:a,small:r,defaultValue:n,onChange:this._handleOnChange,items:t})}}]),t}(u.a.Component);p.propTypes={roles:l.a.array.isRequired,onChange:l.a.func.isRequired,value:l.a.any.isRequired,small:l.a.bool,disabled:l.a.bool},t.a=p},1585:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),s=n.n(l),u=n(41),c=n(42),f=n(8),p=n.n(f),d=n(27),h=n(43),b=n(985),m=n(80),v=n.n(m),g=n(1118),y=n(262),E=n(828),_=n(254),U=n.n(_),C=n(827),O=n(729),R=n(1117),S=n(6),w=n(136),k=n(263),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),N=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:{},userBuffer:{},userRaw:{},confirmDelete:!1},n._handleEditUser=n._handleEditUser.bind(n),n._handleDeleteUser=n._handleDeleteUser.bind(n),n._handleInputChange=n._handleInputChange.bind(n),n._handleBlockUser=n._handleBlockUser.bind(n),n}return i(t,e),A(t,[{key:"componentDidUpdate",value:function(e){var t=e.OPERATION_SUCCESSFUL,n=e.OPERATION_FAILED,r=this.props,a=r.OPERATION_SUCCESSFUL,o=r.OPERATION_FAILED,i=r.history;if(!v()(t,a)){var l=this.state.user.name.toUpperCase();a.action===S._36&&(i.goBack(),w.a.show({message:l+" Successfully Updated \ud83d\ude03",intent:u.x.SUCCESS,icon:"tick"})),a.action===S._9&&(i.goBack(),w.a.show({message:l+" Successfully Deleted \ud83d\ude03",intent:u.x.SUCCESS,icon:"tick"}))}if(!v()(n,o)){var s=this.state.user.name.toUpperCase();o.action===S._36&&(console.log(o.data),w.a.show({message:"Could Not Update "+s+" \ud83d\ude1e",intent:u.x.DANGER,icon:"error"})),o.action===S._9&&(console.log(o.data),w.a.show({message:"Could Not Delete "+s+" \ud83d\ude1e",intent:u.x.DANGER,icon:"error"}))}}},{key:"_handleInputChange",value:function(e,t){var n=this;this.setState(function(){return{user:Object.assign({},n.state.user,r({},e,t))}})}},{key:"_handleBlockUser",value:function(){}},{key:"_handleDeleteUser",value:function(){this.props.deleteUser(this.state.user.uuid),this.setState({confirmDelete:!1})}},{key:"_handleEditUser",value:function(){var e=this.props,t=e.editUser,n=e.authUser.token,r=this.state,a=r.user,o=a.name,i=a.username,l=a.role,s=a.status,u=r.userRaw.uuid,c=new FormData;c.append("full_name",o),c.append("username",i),c.append("role_id",l);var f="active"===s?"1":"0";c.append("status",f),t(n,u,c)}},{key:"_isFormValid",value:function(){var e=this.state.user,t=e.name,n=e.username,r=e.role,a={name:t,username:n,role:r};return Object(O.a)(a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.editingUser,a=t.roles,o=t.deletingUser,i=t.authUser,l=this.state,c=l.user,f=c.name,p=c.username,d=c.role,h=c.status,b=l.userBuffer,m=l.user,_=l.confirmDelete,U=l.userRaw,O=!this._isFormValid()||v()(m,b),S=!U.uuid,w=!!i.root||k.a.User(i).perform(E.c,C.i,y.i),A=!!i.root||k.a.User(i).perform(E.b,C.i,y.i);return[s.a.createElement("div",{className:"bp3-dialog-body"},s.a.createElement(R.a,{open:_,intent:u.x.DANGER,onConfirm:this._handleDeleteUser,onCancel:function(){return e.setState({confirmDelete:!1})}}),s.a.createElement("label",{className:"bp3-label"},"Full Name",s.a.createElement("input",{value:f||"",name:"name",onChange:function(t){var n=t.target,r=n.name,a=n.value;return e._handleInputChange(r,a)},className:"bp3-input bp3-fill",type:"text",dir:"auto"})),s.a.createElement("label",{className:"bp3-label"},"Username",s.a.createElement("input",{value:p||"",name:"username",onChange:function(t){var n=t.target,r=n.name,a=n.value;return e._handleInputChange(r,a)},className:"bp3-input bp3-fill",type:"email",dir:"auto"})),s.a.createElement("label",{className:"bp3-label"},"Role",s.a.createElement(g.a,{small:!1,roles:a,onChange:function(t){var n=t.value;return e._handleInputChange("role",n)},value:d||""})),s.a.createElement("label",{style:{display:"flex",marginRight:0},className:"bp3-control bp3-inline bp3-align-right bp3-switch"},s.a.createElement("input",{name:"status",checked:"active"===h,onChange:function(t){var n=t.target.name;return e._handleInputChange(n,"active"===h?"inactive":"active")},type:"checkbox"}),s.a.createElement("span",{className:"bp3-control-indicator"}),s.a.createElement("span",null,"Active"))),s.a.createElement("div",{className:"bp3-dialog-footer"},s.a.createElement("div",{className:"bp3-dialog-footer-actions"},S&&s.a.createElement(u.e,{intent:u.x.PRIMARY,onClick:function(){return n.goBack()},icon:"undo",text:"Go Back"}),s.a.createElement(u.e,{disabled:o||r||S||!A,loading:o,onClick:function(){return e.setState({confirmDelete:!0})},intent:u.x.DANGER,text:"delete",icon:"trash"}),s.a.createElement(u.e,{disabled:O||o||S||!w,loading:r,intent:u.x.PRIMARY,onClick:this._handleEditUser,icon:"tick",text:"save"})))]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.userRaw,r=e.users,a=e.match.params.uuid,o=U()(r,{uuid:a})||{role:{}},i=Object.assign({},o,{role:o.role?o.role.id:null});return v()(n,o)?null:{user:i,userBuffer:Object.assign({},i),userRaw:o}}}]),t}(s.a.Component);N.propTypes={history:p.a.object.isRequired,authUser:p.a.object.isRequired,match:p.a.object.isRequired,OPERATION_FAILED:p.a.object.isRequired,OPERATION_SUCCESSFUL:p.a.object.isRequired,editUser:p.a.func.isRequired,deleteUser:p.a.func.isRequired,editingUser:p.a.bool.isRequired,deletingUser:p.a.bool.isRequired,roles:p.a.array.isRequired,users:p.a.array.isRequired,policies:p.a.array.isRequired};var j=function(e){return{authUser:e.authUser,OPERATION_FAILED:e.OPERATION_FAILED,OPERATION_SUCCESSFUL:e.OPERATION_SUCCESSFUL,editingUser:e.editingUser,deletingUser:e.deletingUser,roles:e.roles,policies:e.policies,users:e.users}},x=function(e){return Object(h.b)({deleteUser:b.b,editUser:b.c},e)};t.default=Object(c.f)(Object(d.b)(j,x)(N))},729:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=[];return l()(e,function(e,n){if("number"===typeof e)if(e){var o;t=[].concat(a(t),[(o={},r(o,n,e),r(o,"valid",!0),o)])}else{var i;t=[].concat(a(t),[(i={},r(i,n,e),r(i,"valid",!1),i)])}else if("string"===typeof e)if(e.trim().length>0){var l;t=[].concat(a(t),[(l={},r(l,n,e),r(l,"valid",!0),l)])}else{var s;t=[].concat(a(t),[(s={},r(s,n,e),r(s,"valid",!1),s)])}else if(u()(e))if(e.length>0){var c;t=[].concat(a(t),[(c={},r(c,n,e),r(c,"valid",!0),c)])}else{var f;t=[].concat(a(t),[(f={},r(f,n,e),r(f,"valid",!1),f)])}else{var p;t=[].concat(a(t),[(p={},r(p,n,e),r(p,"valid",!1),p)])}}),console.log("form validation",t),f()(t,"valid")}t.a=o;var i=n(731),l=n.n(i),s=n(14),u=n.n(s),c=n(733),f=n.n(c)},731:function(e,t,n){function r(e,t){return e&&a(e,o(t))}var a=n(257),o=n(732);e.exports=r},732:function(e,t,n){function r(e){return"function"==typeof e?e:a}var a=n(60);e.exports=r},733:function(e,t,n){function r(e,t,n){var r=l(e)?a:o;return n&&s(e,t,n)&&(t=void 0),r(e,i(t,3))}var a=n(734),o=n(735),i=n(59),l=n(14),s=n(258);e.exports=r},734:function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}e.exports=n},735:function(e,t,n){function r(e,t){var n=!0;return a(e,function(e,r,a){return n=!!t(e,r,a)}),n}var a=n(137);e.exports=r}});
//# sourceMappingURL=33.bd309a8d.chunk.js.map