webpackJsonp([34],{1565:function(e,n,t){"use strict";function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var l=t(0),c=t.n(l),u=t(58),s=t(1566),p=t(8),f=t.n(p),d=t(27),b=t(42),h=t(865),v=t(727),m=t(725),y=t(80),g=t.n(y),O=t(6),E=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),_=function(e){function n(){var e,t,i,l;r(this,n);for(var c=arguments.length,u=Array(c),s=0;s<c;s++)u[s]=arguments[s];return t=i=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),i.state={name:"",description:"",policies:[]},i._handleInputChange=function(e,n){return i.setState(function(){return Object.assign({},i.state,a({},e,n))})},i._handleAddRole=function(){for(var e=i.state,n=e.name,t=e.description,a=e.policies,r=a.map(function(e){return e.gate.id}),o=a.map(function(e){return e.id}),l=new FormData,c=0;c<r.length;c++)l.append("pages[]",r[c]);for(var u=0;u<o.length;u++)l.append("policies[]",o[u]);l.append("name",n),l.append("description",t),i.props.addRole(l)},i._isFormValid=function(){var e=i.state,n=e.name,t=e.policies,a={name:n,policies:t.map(function(e){return e.id})};return Object(v.a)(a)},l=t,o(i,l)}return i(n,e),E(n,[{key:"componentDidUpdate",value:function(e){var n=e.OPERATION_SUCCESSFUL,t=e.OPERATION_FAILED,a=this.props,r=a.OPERATION_SUCCESSFUL,o=a.OPERATION_FAILED,i=a.history,l=this.state.name.toUpperCase();g()(n,r)||r.action===O.E&&(i.goBack(),m.a.show({message:l+" Successfully Added \ud83d\ude03",intent:u.x.SUCCESS,icon:"tick"})),g()(t,o)||o.action===O.E&&(console.log(o.data),m.a.show({message:"Could Not Add "+l+" \ud83d\ude1e",intent:u.x.DANGER,icon:"error"}))}},{key:"render",value:function(){var e=this,n=this.props.addingRole,t=!this._isFormValid();return[c.a.createElement("div",{className:"bp3-dialog-body"},c.a.createElement("label",{className:"bp3-label"},"Name",c.a.createElement("input",{value:this.state.name||"",name:"name",onChange:function(n){var t=n.target,a=t.name,r=t.value;return e._handleInputChange(a,r)},className:"bp3-input bp3-fill",type:"text",dir:"auto"})),c.a.createElement("label",{className:"bp3-label"},"Policies",c.a.createElement(s.a,{onChange:function(n){var t=n.value;return e._handleInputChange("policies",t)},values:this.state.policies})),c.a.createElement("label",{className:"bp3-label"},"Description",c.a.createElement("textarea",{name:"description",onChange:function(n){var t=n.target,a=t.name,r=t.value;return e._handleInputChange(a,r)},value:this.state.description,className:"bp3-input bp3-fill",dir:"auto"}))),c.a.createElement("div",{className:"bp3-dialog-footer"},c.a.createElement("div",{className:"bp3-dialog-footer-actions"},c.a.createElement(u.e,{disabled:t,loading:n,intent:u.x.PRIMARY,onClick:this._handleAddRole,icon:"tick",text:"save"})))]}}]),n}(c.a.Component);_.propTypes={history:f.a.object.isRequired,authUser:f.a.object.isRequired,OPERATION_SUCCESSFUL:f.a.object.isRequired,OPERATION_FAILED:f.a.object.isRequired,addRole:f.a.func.isRequired,addingRole:f.a.bool.isRequired};var C=function(e){return{authUser:e.authUser,OPERATION_FAILED:e.OPERATION_FAILED,OPERATION_SUCCESSFUL:e.OPERATION_SUCCESSFUL,addingRole:e.addingRole}},R=function(e){return Object(b.b)({addRole:h.a},e)};n.default=Object(d.b)(C,R)(_)},1566:function(e,n,t){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}function o(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var i=t(8),l=t.n(i),c=t(0),u=t.n(c),s=t(27),p=t(774),f=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),d=function(e){function n(e){a(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._handleOnChange=t._handleOnChange.bind(t),t}return o(n,e),f(n,[{key:"_handleOnChange",value:function(e){(0,this.props.onChange)({label:"policies",value:e})}},{key:"render",value:function(){var e=this.props,n=e.policies,t=e.values,a=e.small,r=e.disabled;return u.a.createElement(p.c,{disabled:r||n.length<1,label:"policy",small:a,defaultValues:t,onChange:this._handleOnChange,items:n})}}]),n}(u.a.Component);d.propTypes={policies:l.a.array.isRequired,onChange:l.a.func.isRequired,values:l.a.array.isRequired,small:l.a.bool,disabled:l.a.bool};var b=function(e){return{policies:e.policies}};n.a=Object(s.b)(b)(d)},727:function(e,n,t){"use strict";function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function o(e){var n=[];return l()(e,function(e,t){if("number"===typeof e)if(e){var o;n=[].concat(r(n),[(o={},a(o,t,e),a(o,"valid",!0),o)])}else{var i;n=[].concat(r(n),[(i={},a(i,t,e),a(i,"valid",!1),i)])}else if("string"===typeof e)if(e.trim().length>0){var l;n=[].concat(r(n),[(l={},a(l,t,e),a(l,"valid",!0),l)])}else{var c;n=[].concat(r(n),[(c={},a(c,t,e),a(c,"valid",!1),c)])}else if(u()(e))if(e.length>0){var s;n=[].concat(r(n),[(s={},a(s,t,e),a(s,"valid",!0),s)])}else{var p;n=[].concat(r(n),[(p={},a(p,t,e),a(p,"valid",!1),p)])}else{var f;n=[].concat(r(n),[(f={},a(f,t,e),a(f,"valid",!1),f)])}}),console.log("form validation",n),p()(n,"valid")}n.a=o;var i=t(729),l=t.n(i),c=t(14),u=t.n(c),s=t(731),p=t.n(s)},729:function(e,n,t){function a(e,n){return e&&r(e,o(n))}var r=t(256),o=t(730);e.exports=a},730:function(e,n,t){function a(e){return"function"==typeof e?e:r}var r=t(60);e.exports=a},731:function(e,n,t){function a(e,n,t){var a=l(e)?r:o;return t&&c(e,n,t)&&(n=void 0),a(e,i(n,3))}var r=t(732),o=t(733),i=t(59),l=t(14),c=t(257);e.exports=a},732:function(e,n){function t(e,n){for(var t=-1,a=null==e?0:e.length;++t<a;)if(!n(e[t],t,e))return!1;return!0}e.exports=t},733:function(e,n,t){function a(e,n){var t=!0;return r(e,function(e,a,r){return t=!!n(e,a,r)}),t}var r=t(136);e.exports=a}});
//# sourceMappingURL=34.b05f8c5d.chunk.js.map